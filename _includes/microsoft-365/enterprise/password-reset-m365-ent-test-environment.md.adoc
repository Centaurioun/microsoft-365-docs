= Password reset for your Microsoft 365 test environment
:audience: ITPro
:author: kelleyvice-msft
:description: Summary: Configure and test password reset for your Microsoft 365 test environment.
:f1.keywords: ["NOCSH"]
:manager: scotv
:ms.assetid:
:ms.author: kvice
:ms.collection: ["M365-identity-device-management", "Strat_O365_Enterprise"]
:ms.custom: ["TLGS", "Ent_TLGs"]
:ms.date: 12/13/2019
:ms.localizationpriority: medium
:ms.service: microsoft-365-enterprise
:ms.topic: article

== Password reset for your Microsoft 365 test environment

_This Test Lab Guide can only be used for Microsoft 365 for enterprise test environments._

Azure Active Directory (Azure AD) self-service password reset (SSPR) allows users to reset or unlock their passwords or accounts.

This article describes how to configure and test password resets in your Microsoft 365 test environment.

Setting up SSPR involves three phases:

* <<phase-1-configure-password-hash-synchronization-for-your-microsoft-365-test-environment,Phase 1: Configure password hash synchronization for your Microsoft 365 test environment>>
* <<phase-2-enable-password-writeback,Phase 2: Enable password writeback>>
* <<phase-3-configure-and-test-password-reset,Phase 3: Configure and test password reset>>

image::../media/m365-enterprise-test-lab-guides/cloud-tlg-icon.png[Test Lab Guides for the Microsoft cloud.]

____
[!TIP] For a visual map to all the articles in the Microsoft 365 for enterprise Test Lab Guide stack, go to link:../downloads/Microsoft365EnterpriseTLGStack.pdf[Microsoft 365 for enterprise Test Lab Guide Stack].
____

=== Phase 1: Configure password hash synchronization for your Microsoft 365 test environment

First, follow the instructions in xref:password-hash-sync-m365-ent-test-environment.adoc[password hash synchronization].

Your resulting configuration looks like this:

image::../media/pass-through-auth-m365-ent-test-environment/Phase1.png[The simulated enterprise with password hash synchronization test environment.]

This configuration consists of:

* A Microsoft 365 E5 trial or paid subscription.
* A simplified organization intranet connected to the internet, consisting of the DC1, APP1, and CLIENT1 virtual machines on a subnet of an Azure virtual network.
* Azure AD Connect runs on APP1 to synchronize the TESTLAB Active Directory Domain Services (AD DS) domain to the Azure AD tenant of your Microsoft 365 subscription.

=== Phase 2: Enable password writeback

Follow the instructions in link:password-writeback-m365-ent-test-environment.md#phase-2-enable-password-writeback-for-the-testlab-ad-ds-domain[Phase 2 of the password writeback Test Lab Guide].

You must have password writeback enabled to use password reset.

=== Phase 3: Configure and test password reset

In this phase, configure password reset in the Azure AD tenant through group membership, and then verify that it works.

First, enable password reset for the accounts in a specific Azure AD group.

. From a private instance of your browser, open https://portal.azure.com, and then sign in with the credentials of your global administrator account.
. In the Azure portal, select *Azure Active Directory* > *Groups* > *New group*.
. Set the *Group type* to *Security*, *Group name* to *PWReset*, and the *Membership type* to *Assigned*.
. Select *Members*, find and select *User 3*, select *Select*, and then select *Create*.
. Close the *Groups* pane.
. In the Azure Active Directory pane, select *Password reset* in the left navigation.
. In the *Password reset-Properties* pane, under the option *Self Service Password Reset Enabled*, choose *Selected*.
. Select *Select group*, select the *PWReset* group, and then select *Select* > *Save*.
. Close the private browser instance.

Next, test password reset for the User 3 account.

. Open a new private browser instance and browse to https://aka.ms/ssprsetup.
. Sign in with the User 3 account credentials.
. In *More information required*, select *Next*.
. In *Don't lose access to your account*, set the authentication phone to your mobile phone number and the authentication email to your work or personal email account.
. After both are verified, select *Looks good*, and then close the private instance of the browser.
. In a new private browser instance, go to https://aka.ms/sspr.
. Enter the User 3 account name, enter the characters from the CAPTCHA, and then select *Next*.
. For *verification step 1*, select *Email my alternate email*, and then select *Email*.
When you receive the email, enter the verification code, and then select *Next*.
. In *Get back into your account*, enter a new password for the User 3 account, and then select *Finish*.
Note the changed password of the User 3 account and store it in a safe location.
. In a separate tab of the same browser, go to https://admin.microsoft.com, and then sign in with the User 3 account name and its new password.
You should see the *Microsoft Office Home* page.

=== Next step

Explore additional link:m365-enterprise-test-lab-guides.md#identity[identity] features and capabilities in your test environment.

=== See also

xref:m365-enterprise-test-lab-guides.adoc[Microsoft 365 for enterprise Test Lab Guides]

xref:microsoft-365-overview.adoc[Microsoft 365 for enterprise overview]

link:/microsoft-365-enterprise/[Microsoft 365 for enterprise documentation]
