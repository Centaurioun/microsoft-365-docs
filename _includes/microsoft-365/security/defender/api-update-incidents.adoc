= 
mjcaparas
:keywords: update, api, incident

== Update incidents API

{empty}[!INCLUDE link:../includes/microsoft-defender.md[Microsoft 365
Defender rebranding]]

*Applies to:*

* https://go.microsoft.com/fwlink/?linkid=2118804[Microsoft 365
Defender]

____
[!NOTE] *Try our new APIs using MS Graph security API*. Find out more
at: link:/graph/api/resources/security-api-overview[Use the Microsoft
Graph security API - Microsoft Graph beta | Microsoft Learn].
____

____
[!IMPORTANT] Some information relates to prereleased product which may
be substantially modified before it’s commercially released. Microsoft
makes no warranties, express or implied, with respect to the information
provided here.
____

=== API description

Updates properties of existing incident. Updatable properties are:
`status`, `determination`, `classification`, `assignedTo`, `tags`, and
`comments`.

==== Quotas, resource allocation, and other constraints

[arabic]
. You can make up to 50 calls per minute or 1500 calls per hour before
you hit the throttling threshold.
. You can set the `determination` property only if `classification` is
set to TruePositive.

If your request is throttled, it will return a `429` response code. The
response body will indicate the time when you can begin making new
calls.

=== Permissions

One of the following permissions is required to call this API. To learn
more, including how to choose permissions, see link:api-access.md[Access
the Microsoft 365 Defender APIs].

[width="100%",cols="34%,33%,33%",options="header",]
|===
|Permission type |Permission |Permission display name
|Application |Incident.ReadWrite.All |Read and write all incidents

|Delegated (work or school account) |Incident.ReadWrite |Read and write
incidents
|===

____
[!NOTE] When obtaining a token using user credentials, the user needs to
have permission to update the incident in the portal.
____

=== HTTP request

[source,http]
----
PATCH /api/incidents/{id}
----

=== Request headers

[cols=",,",options="header",]
|===
|Name |Type |Description
|Authorization |String |Bearer \{token}. *Required*.
|Content-Type |String |application/json. *Required*.
|===

=== Request body

In the request body, supply the values for the fields that should be
updated. Existing properties that aren’t included in the request body
will maintain their values, unless they have to be recalculated due to
changes to related values. For best performance, you should omit
existing values that haven’t changed.

[width="100%",cols="34%,33%,33%",options="header",]
|===
|Property |Type |Description
|status |Enum |Specifies the current status of the incident. Possible
values are: `Active`, `Resolved`, and `Redirected`.

|assignedTo |string |Owner of the incident.

|classification |Enum |Specification of the incident. Possible values
are: `TruePositive`, `Informational, expected activity`, and
`FalsePositive`.

|determination |Enum |Specifies the determination of the incident.

|tags |string list |List of Incident tags.

|comment |string |Comment to be added to the incident.
|===

____
[!NOTE] Around August 29, 2022, previously supported alert determination
values (`Apt' and `SecurityPersonnel') will be deprecated and no longer
available via the API.
____

=== Response

If successful, this method returns `200 OK`. The response body will
contain the incident entity with updated properties. If an incident with
the specified ID wasn’t found, the method returns `404 Not Found`.

=== Example

==== Request example

Here’s an example of the request.

[source,http]
----
 PATCH https://api.security.microsoft.com/api/incidents/{id}
----

==== Response example

[source,json]
----
{
    "status": "Resolved",
    "assignedTo": "secop2@contoso.com",
    "classification": "TruePositive",
    "determination": "Malware",
    "tags": ["Yossi's playground", "Don't mess with the Zohan"],
    "comments": [
          {
              "comment": "pen testing",
              "createdBy": "secop2@contoso.com",
              "createdTime": "2021-05-02T09:34:21.5519738Z"
          },
          {
              "comment": "valid incident",
              "createdBy": "secop2@contoso.comt",
              "createdTime": "2021-05-02T09:36:27.6652581Z"
          }
      ]
}
----

=== Related articles

* link:/graph/api/resources/security-api-overview[Use the Microsoft
Graph security API - Microsoft Graph beta | Microsoft Learn]
* link:api-access.md[Access the Microsoft 365 Defender APIs]
* link:api-terms.md[Learn about API limits and licensing]
* link:api-error-codes.md[Understand error codes]
* link:api-incident.md[Incident APIs]
* link:api-list-incidents.md[List incidents]
* link:incidents-overview.md[Incidents overview]
