= 
chrisda

== Anti-spam protection in EOP

{empty}[!INCLUDE link:../includes/mdo-trial-banner.md[MDO Trial banner]]

*Applies to* - link:eop-about.md[Exchange Online Protection] -
link:defender-for-office-365.md[Microsoft Defender for Office 365 plan 1
and plan 2] -
link:/microsoft-365/security/defender/microsoft-365-defender[Microsoft
365 Defender]

____
[!NOTE] This topic is intended for admins. For end-user topics, see
https://support.microsoft.com/office/5ae3ea8e-cf41-4fa0-b02a-3b96e21de089[Overview
of the Junk Email Filter] and
https://support.microsoft.com/office/86c1d76f-4d5a-4967-9647-35665dc17c31[Learn
about junk email and phishing].
____

In Microsoft 365 organizations with mailboxes in Exchange Online or
standalone Exchange Online Protection (EOP) organizations without
Exchange Online mailboxes, email messages are automatically protected
against spam (junk email) by EOP.

Microsoft’s email safety roadmap involves an unmatched cross-product
approach. EOP anti-spam and anti-phishing technology is applied across
our email platforms to provide users with the latest anti-spam and
anti-phishing tools and innovations throughout the network. The goal for
EOP is to offer a comprehensive and usable email service that helps
detect and protect users from junk email, fraudulent email threats
(phishing), and malware.

As email use has grown, so has email abuse. Unmonitored junk email can
clog inboxes and networks, impact user satisfaction, and hamper the
effectiveness of legitimate email communications. That’s why Microsoft
continues to invest in anti-spam technologies. Simply put, it starts by
containing and filtering junk email.

____
[!TIP] The following anti-spam technologies are useful when you want to
allow or block messages based on the message envelope (for example, the
sender’s domain or the source IP address of the message). To allow or
block messages based on payload (for example, URLs in the message or
attached files), then you should use the
link:tenant-allow-block-list-about.md[Tenant Allow/Block List portal].
____

=== Anti-spam technologies in EOP

To help reduce junk email, EOP includes junk email protection that uses
proprietary spam filtering technologies to identify and separate junk
email from legitimate email. EOP spam filtering learns from known spam
and phishing threats and user feedback from our consumer platform,
Outlook.com. Ongoing feedback from EOP users in the junk email
classification program helps ensure that the EOP technologies are
continually trained and improved.

The anti-spam settings in EOP are made of the following technologies:

* *Connection filtering*: Identifies good and bad email source servers
early in the inbound email connection via the IP Allow List, IP Block
List, and the _safe list_ (a dynamic but non-editable list of trusted
senders maintained by Microsoft). You configure these settings in the
connection filter policy. Learn more at
link:connection-filter-policies-configure.md[Configure connection
filtering].
* *Spam filtering (content filtering)*: EOP uses the spam filtering
verdicts *Spam*, *High confidence spam*, *Bulk email*, *Phishing email*
and *High confidence phishing email* to classify messages. You can
configure the actions to take based on these verdicts, and you can
configure what users are allowed to do to quarantined messages and
whether user receive quarantine notifications by using
link:quarantine-policies.md[quarantine policies]. For more information,
see link:anti-spam-policies-configure.md[Configure anti-spam policies in
Microsoft 365].
+
____
[!NOTE] By default, spam filtering is configured to send messages that
were marked as spam to the recipient’s Junk Email folder. However, in
hybrid environments where EOP protects on-premises Exchange mailboxes,
you need to configure two mail flow rules (also known as transport
rules) in your on-premises Exchange organization to recognize the EOP
spam headers that are added to messages. For details, see
link:/exchange/standalone-eop/configure-eop-spam-protection-hybrid[Configure
EOP to deliver spam to the Junk Email folder in hybrid environments].
____
* *Outbound spam filtering*: EOP also checks to make sure that your
users don’t send spam, either in outbound message content or by
exceeding outbound message limits. For more information, see
link:outbound-spam-policies-configure.md[Configure outbound spam
filtering in Microsoft 365].
* *Spoof intelligence*: For more information, see
link:anti-phishing-protection-spoofing-about.md[Anti-spoofing protection
in EOP].

=== Manage errors in spam filtering

It’s possible that good messages can be identified as spam (also known
as false positives), or that spam can be delivered to the Inbox (also
known as false negatives). You can use the suggestions in the following
sections to find out what happened and help prevent it from happening in
the future.

Here are some best practices that apply to either scenario:

* Always report misclassified messages to Microsoft. For more
information, see
link:submissions-report-messages-files-to-microsoft.md[Report messages
and files to Microsoft].
* *Examine the anti-spam message headers*: These values will tell you
why a message was marked as spam, or why it skipped spam filtering. For
more information, see link:message-headers-eop-mdo.md[Anti-spam message
headers].
* *Point your MX record to Microsoft 365*: In order for EOP to provide
the best protection, we always recommend that you have email delivered
to Microsoft 365 first. For instructions, see
link:../../admin/get-help-with-domains/create-dns-records-at-any-dns-hosting-provider.md[Create
DNS records at any DNS hosting provider for Microsoft 365].
+
If the MX record points to some other location (for example, a
third-party anti-spam solution or appliance), it’s difficult for EOP to
provide accurate spam filtering. In this scenario, you need to configure
Enhanced Filtering for connectors (also known as _skip listing_). For
instructions, see
link:/exchange/mail-flow-best-practices/use-connectors-to-configure-mail-flow/enhanced-filtering-for-connectors[Enhanced
Filtering for Connectors in Exchange Online].
* *Use email authentication*: If you own an email domain, you can use
DNS to help insure that messages from senders in that domain are
legitimate. To help prevent spam and unwanted spoofing in EOP, use all
of the following email authentication methods:
** *SPF*: Sender Policy Framework verifies the source IP address of the
message against the owner of the sending domain. For a quick
introduction to SPF and to get it configured quickly, see
link:email-authentication-spf-configure.md[Set up SPF to help prevent
spoofing]. For a more in-depth understanding of how Microsoft 365 uses
SPF, or for troubleshooting or non-standard deployments such as hybrid
deployments, start with link:email-authentication-anti-spoofing.md[How
Microsoft 365 uses Sender Policy Framework (SPF) to prevent spoofing].
** *DKIM*: DomainKeys Identified Mail adds a digital signature to the
message header of messages sent from your domain. For information, see
link:email-authentication-dkim-configure.md[Use DKIM to validate
outbound email sent from your custom domain in Microsoft 365].
** *DMARC*: Domain-based Message Authentication, Reporting, and
Conformance helps destination email systems determine what to do with
messages that fail SPF or DKIM checks and provides another level of
trust for your email partners. For more information, see
link:email-authentication-dmarc-configure.md[Use DMARC to validate email
in Microsoft 365].
* *Verify your bulk email settings*: The bulk complaint level (BCL)
threshold that you configure in anti-spam policies determines whether
bulk email (also known as _gray mail_) is marked as spam. The
PowerShell-only setting _MarkAsSpamBulkMail_ that’s on by default also
contributes to the results. For more information, see
link:anti-spam-policies-configure.md[Configure anti-spam policies in
Microsoft 365].

==== Prevent the delivery of spam to the Inbox

* *Verify your organization settings*: Watch out for settings that allow
messages to skip spam filtering (for example, if you add your own domain
to the allowed domains list in anti-spam policies). For our recommended
settings, see
link:recommended-settings-for-eop-and-office365.md[Recommended settings
for EOP and Microsoft Defender for Office 365 security] and
link:create-safe-sender-lists-in-office-365.md[Create safe sender
lists].
* *Use the available blocked sender lists*: For information, see
link:create-block-sender-lists-in-office-365.md[Create blocked sender
lists].
* *Unsubscribe from bulk email* If the message was something that the
user signed up for (newsletters, product announcements, etc.) and
contains an unsubscribe link from a reputable source, consider asking
them to simply unsubscribe.
* *Standalone EOP: create mail flow rules in on-premises Exchange for
EOP spam filtering verdicts*: In hybrid environments where EOP protects
on-premises Exchange mailboxes, you need to configure mail flow rules
(also known as transport rules) in on-premises Exchange. These mail flow
rules translate the EOP spam filtering verdict so the junk email rule in
the mailbox can move the message to the Junk Email folder. For details,
see
link:/exchange/standalone-eop/configure-eop-spam-protection-hybrid[Configure
EOP to deliver spam to the Junk Email folder in hybrid environments].

==== Prevent good email from being identified as spam

Here are some steps that you can take to help prevent false positives:

* *Verify the user’s Outlook Junk Email Filter settings*:
** *Verify the Outlook Junk Email Filter is disabled*: When the Outlook
Junk Email Filter is set to the default value *No automatic filtering*,
Outlook doesn’t attempt to classify messages as spam. When it’s set to
*Low* or *High*, the Outlook Junk Email Filter uses its own SmartScreen
filter technology to identify and move spam to the Junk Email folder, so
you could get false positives. Note that Microsoft stopped producing
spam definition updates for the SmartScreen filters in Exchange and
Outlook in November, 2016. The existing SmartScreen spam definitions
were left in place, but their effectiveness will likely degrade over
time.
** *Verify the Outlook `Safe Lists Only' setting is disabled*: When this
setting is enabled, only messages from senders in the user’s Safe
Senders list or Safe Recipients list are delivered to the Inbox; email
from everyone else is automatically moved to the Junk Email folder.
+
For more information about these settings, see
link:configure-junk-email-settings-on-exo-mailboxes.md[Configure junk
email settings on Exchange Online mailboxes in Microsoft 365].
* *Use the available safe sender lists*: For information, see
link:create-safe-sender-lists-in-office-365.md[Create safe sender
lists].
* *Verify users are within the sending and receiving limits* as
described in
link:/office365/servicedescriptions/exchange-online-service-description/exchange-online-limits#receiving-and-sending-limits[Receiving
and sending limits] in the Exchange Online service description.
* *Standalone EOP: use directory synchronization*: If you use standalone
EOP to help protect your on-premises Exchange organization, you should
sync user settings with the service by using directory synchronization.
Doing this ensures that your users’ Safe Senders lists are respected by
EOP. For more information, see
link:/exchange/standalone-eop/manage-mail-users-in-eop#synchronize-directories-with-azure-active-directory-connect-aad-connect[Use
directory synchronization to manage mail users].

=== Anti-spam legislation

At Microsoft, we believe that the development of new technologies and
self-regulation requires the support of effective government policy and
legal frameworks. The worldwide spam proliferation has spurred numerous
legislative bodies to regulate commercial email. Many countries now have
spam-fighting laws in place. The United States has both federal and
state laws governing spam, and this complementary approach is helping to
curtail spam while enabling legitimate e-commerce to prosper. The
CAN-SPAM Act expands the tools available for curbing fraudulent and
deceptive email messages.
