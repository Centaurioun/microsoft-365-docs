= 
chrisda

== User reported message settings

{empty}[!INCLUDE link:../includes/mdo-trial-banner.md[MDO Trial banner]]

*Applies to* - link:eop-about.md[Exchange Online Protection] -
link:defender-for-office-365.md[Microsoft Defender for Office 365 plan 1
and plan 2] - link:../defender/microsoft-365-defender.md[Microsoft 365
Defender]

In Microsoft 365 organizations with Exchange Online mailboxes, you can
identify a _reporting mailbox_ (formerly known as a _custom mailbox_ or
_submissions mailbox_) to hold messages that users report as malicious
or not malicious using supported reporting tools in Outlook. For
Microsoft reporting tools, you can decide whether to send user reported
messages to the reporting mailbox, to Microsoft, or to the reporting
mailbox and Microsoft. These selections were formerly part of the _User
submissions policy_ or _User submissions_.

User reported message settings and the reporting mailbox work with the
following message reporting tools:

* link:submissions-outlook-report-messages.md#use-the-built-in-report-button-in-outlook-on-the-web[The
built-in Report button in Outlook on the web]
* link:submissions-users-report-message-add-in-configure.md[The
Microsoft Report Message or Report Phishing add-ins]
* link:#options-for-third-party-reporting-tools[Third-party reporting
tools]

Delivering user reported messages to a reporting mailbox instead of
directly to Microsoft allows admins to selectively and manually report
messages to Microsoft from the *Emails* tab on the *Submissions* page at
https://security.microsoft.com/reportsubmission?viewid=email. For more
information, see link:submissions-admin.md[Admin submission].

____
[!NOTE] The _ReportJunkEmailEnabled_ parameter on the
link:/powershell/module/exchange/set-owamailboxpolicy[Set-OwaMailboxPolicy]
cmdlet no longer controls whether user message reporting is enabled or
disabled. User reporting of messages is now controlled on the *User
reported* page at
https://security.microsoft.com/securitysettings/userSubmission as
described in this article.
____

=== Configuration requirements for the reporting mailbox

Before you get started, you need to configure Exchange Online Protection
and Defender for Office 365 so user reported messages are delivered to
the reporting mailbox without being filtered as described in the
following steps:

* Identify the reporting mailbox as a SecOps mailbox. For instructions,
see
link:skip-filtering-phishing-simulations-sec-ops-mailboxes.md#use-the-microsoft-365-defender-portal-to-configure-secops-mailboxes-in-the-advanced-delivery-policy[Use
the Microsoft 365 Defender portal to configure SecOps mailboxes in the
advanced delivery policy].
* Create a custom anti-malware policy for the reporting mailbox with the
following settings:
** Turn off Zero-hour auto purge (ZAP) for malware (*Protection
settings* section > *Enable zero-hour auto purge for malware* is not
selected or `-ZapEnabled $false` in PowerShell).
** Turn off common attachments filtering (*Protection settings* section
> *Enable the common attachments filter* is not selected or
`-EnableFileFilter $false` in PowerShell).
+
For instructions, see
link:anti-malware-policies-configure.md#use-the-microsoft-365-defender-portal-to-create-anti-malware-policies[Create
an anti-malware policy].
* Verify that the reporting mailbox is not included in the *Standard* or
*Strict* preset security policies. For instructions, see
link:preset-security-policies.md[Preset security policies].
* *Defender for Office 365*: Configure the following additional
settings:
** Exclude the reporting mailbox from the *Built-in protection* preset
security policy. For instructions, see
link:preset-security-policies.md[Preset security policies].
** Create a Safe Attachments policy for the mailbox where Safe
Attachments scanning, including Dynamic Delivery, is turned off
(*Settings* > *Safe Attachments unknown malware response* section >
*Off* or `-Enable $false` in PowerShell). For instructions, see
link:safe-attachments-policies-configure.md[Set up Safe Attachments
policies in Microsoft Defender for Office 365].
** Create a Safe Links policy for the reporting mailbox where Safe Links
scanning in email is turned off (*URL & click protection settings* >
*On: Safe Links checks a list of known, malicious links when users click
links in email* is not selected or `EnableSafeLinksForEmail $false` in
PowerShell). For instructions, see
link:safe-links-policies-configure.md[Set up Safe Links policies in
Microsoft Defender for Office 365].
* If you have data loss prevention (DLP), exclude the reporting mailbox
from DLP. For instructions, see
link:/microsoft-365/compliance/dlp-conditions-and-exceptions[Creating
exceptions in DLP].

After you’ve verified that the reporting mailbox meets all of these
requirements, use the rest of the instructions in this article to
identify the reporting mailbox to configure related settings for user
reported message.

=== What do you need to know before you begin?

* You open the Microsoft 365 Defender portal at
https://security.microsoft.com. To go directly to the *User reported*
page, use
https://security.microsoft.com/securitysettings/userSubmission.
* To connect to Exchange Online PowerShell, see
link:/powershell/exchange/connect-to-exchange-online-powershell[Connect
to Exchange Online PowerShell].
* To modify the settings for user reported messages, you need to be a
member of one of the following role groups:
** *Organization Management* or *Security Administrator* in the
link:mdo-portal-permissions.md[Permissions in the Microsoft 365 Defender
portal].
* You need access to Exchange Online PowerShell. If the account that
you’re trying to use doesn’t have access to Exchange Online PowerShell,
you’ll receive an error that looks like this when specifying the
submissions mailbox:
+
____
Specify an email address in your domain
____
+
For more information about enabling or disabling access to Exchange
Online PowerShell, see the following topics:
** link:/powershell/exchange/disable-access-to-exchange-online-powershell[Enable
or disable access to Exchange Online PowerShell]
** link:/exchange/clients-and-mobile-in-exchange-online/client-access-rules/client-access-rules[Client
Access Rules in Exchange Online]

=== Use the Microsoft 365 Defender portal to user reported message settings

[arabic]
. In the Microsoft 365 Defender portal at
https://security.microsoft.com, go to *Settings* > *Email &
collaboration* > *User reported* tab. To go directly to the *User
reported* page, use
https://security.microsoft.com/securitysettings/userSubmission.
. On the *User reported* page, what you see and can configure is
determined entirely by the toggle at the top of the page:
* *On* image:../../media/scc-toggle-on.png[Toggle on.]: The following
configurations are supported:
** Users in your organization can see and use the the built-in *Report*
button in Outlook on the web or the Microsoft Report Message or Report
Phishing add-ins in virtually all Outlook platforms to report messages.
*** You can configure user reported messages to go to the reporting
mailbox, to Microsoft, or both.
*** You decide whether users receive *Before a message is reported* and
*After a message is reported* pop-ups in Outlook.
*** You decide how to customize the feedback email that’s sent to users
from *Mark and notify* on the *Submissions* page at
https://security.microsoft.com/reportsubmission.
*** You decide whether users can report messages from quarantine.
+
You choose this configuration by selecting *Use the built-in ``Report''
button with ``Phishing'', ``Junk'', and “Not Junk options* in the
*Outlook report button configuration* section. The available
configuration options from this selection are explained in the
link:#options-for-microsoft-reporting-tools[Options for Microsoft
reporting tools] section in this article.
** Users in your organization use a third-party, non-Microsoft add-in to
report messages.
*** You decide whether Microsoft can read end user report from the
third-party reporting mailbox.
*** You decide whether users can report messages from quarantine to
third-party reporting mailbox.
+
You choose this configuration by selecting *Use a non-Microsoft add-in
button* in the *Outlook report button configuration* section. The
available configuration options from this selection are explained in the
link:#options-for-third-party-reporting-tools[Options for third-party
reporting tools] section in this article.
* *Off* image:../../media/scc-toggle-off.png[Toggle off.]: The
Microsoft-integrated reporting experience is turned off, and all other
settings on the *User reported* page are unavailable, including the
ability for users to report messages from quarantine.

==== Options for Microsoft reporting tools

When the toggle is *On* image:../../media/scc-toggle-on.png[Toggle on.]
and you’ve selected *Use the built-in ``Report'' button with
``Phishing'', ``Junk'', and “Not Junk options*, the following options
are available on the *User reported* page:

* *Send the reported messages to* in the *Reported message destinations*
section: Select one of the following options:
** *Microsoft only*: User reported messages go directly to Microsoft for
analysis. Only metadata from the user reported messages (for example,
senders, recipients, reported by, and message details) is available on
the *User reported* tab on the *Submissions* page at
https://security.microsoft.com/reportsubmission?viewid=user.
** *My reporting mailbox only*: User reported messages go only to the
specified reporting mailbox for an admin or the security operations team
to analyze.
+
In the *Add a mailbox to send reported messages to* box that appears,
enter the email address of an existing Exchange Online mailbox to use as
the reporting mailbox that holds user reported messages from Microsoft
reporting tools. Distribution groups are not allowed.
+
Messages don’t go to Microsoft for analysis unless an admin manually
submits the message from the *Emails* tab on the *Submissions* page at
https://security.microsoft.com/reportsubmission?viewid=email.
** *Microsoft and my reporting mailbox*: User reported messages go to
Microsoft for analysis and to the reporting mailbox for an admin or
security operations team to analyze.
+
In the *Add a mailbox to send reported messages to* box that appears,
enter the email address of an existing Exchange Online mailbox to use as
the reporting mailbox. Distribution groups are not allowed.
+
____
[!IMPORTANT] In U.S. Government organizations (Microsoft 365 GCC, GCC
High, and DoD), the only available selection in the *Send the reported
messages to* section is *My reporting mailbox only*. The other two
options are grayed out.

If you select *My reporting mailbox only*, the *Result* value of
messages entries on the *User reported* tab on the *Submissions* page at
https://security.microsoft.com/reportsubmission?viewid=user will always
be empty, because the messages were not rescanned.

If you use link:attack-simulation-training-get-started.md[Attack
simulation training] or a third-party product to do phishing
simulations, you must configure the reporting mailbox as a SecOps
mailbox as previously described in the
link:#configuration-requirements-for-the-reporting-mailbox[Configuration
requirements for the reporting mailbox] section earlier in this article.
If you don’t, a user reporting a message might trigger a training
assignment in the phishing simulation product.
____

The following settings are also available on the page:

* *Show a pop-up message in Outlook to confirm it the user want’s to
report the message* in the *Before a message is reported* section: This
setting controls whether users see a pop-up before they report a message
using the Report Message add-in or the Report Phishing add-in.
Currently, this setting does not affect the built-in *Report* button in
Outlook on the web.
+
If this setting is selected, click *Customize before message* to enter
the the *Title* and *Message* text in the *Customize text before message
is reported* flyout that opens. Use the variable `%type%` to include the
submission type (junk, not junk, phishing, etc.).
+
When you’re finished, click *Confirm* to return to the *User reported*
page.
* *Show a success pop-up message in Outlook after the user reports* in
the *After a message is reported* section: This setting controls whether
users see a pop-up after they report a message using the Report Message
add-in or the Report Phishing add-in. Currently, this setting does not
affect the built-in *Report* button in Outlook on the web.
+
If this setting is selected, click *Customize after message* to enter
the the *Title* and *Message* text in the *Customize text after message
is reported* flyout that opens. Use the variable `%type%` to include the
submission type (junk, not junk, phishing, etc.).
+
When you’re finished, click *Confirm* to return to th *User reported*
page.
* *Email sent to user after admin review* section: The following
settings are available:
** *Specify an Office 365 mailbox to send email notifications from*:
Select this option and enter the sender’s email address in the box that
appears.
** *Replace the Microsoft logo with my company logo*: Select this option
to replace the default Microsoft logo that’s used in notifications.
Before you do this step, you need to follow the instructions in
link:../../admin/setup/customize-your-organization-theme.md[Customize
the Microsoft 365 theme for your organization] to upload your custom
logo. This option is not supported if your organization has a custom
logo pointing to a URL instead of an uploaded image file.
** *Customize email notification messages*: Click this link to customize
the email notification that’s sent after an admin reviews and marks a
reported message. In the *Customize admin review email notifications*
flyout that appears, configure the following settings on the *Phishing*,
*Junk* and *No threats found* tabs:
*** *Email body results text*: Enter the custom text to use. You can use
different text for *Phishing*, *Junk* and *No threats found*.
*** *Email footer text*: Enter the custom message footer text to use.
The same text is used for *Phishing*, *Junk* and *No threats found*.
+
When you’re finished, click *Confirm* to return to the *User reported*
page.

When you’re finished on the *User reported* page, click *Save*. To
restore all settings on the page to their immediately previous values,
click *Restore*.

==== Options for third-party reporting tools

When the toggle is *On* image:../../media/scc-toggle-on.png[Toggle on.]
and you’ve selected *Use a non-Microsoft add-in button*, the following
options are available on the *User reported* page:

* *Add a mailbox to send reported messages to* in the *Reported message
destinations* section: Enter the email address of an existing Exchange
Online mailbox to use as the reporting mailbox that holds user reported
messages from third-party reporting tools. These messages are not
submitted to Microsoft.
+
These user reported messages appear on the *User reported* tab of the
*Submissions* page at
https://security.microsoft.com/reportsubmission?viewid=user. The
*Result* value for these entries is *Not Submitted to Microsoft*.
+
A messages sent to the reporting mailbox must include the original user
reported message as an uncompressed .EML or .MSG attachment. Don’t
forward the original user reported message to the reporting mailbox.
+
____
[!NOTE] Messages that contain multiple attached messages will be
discarded. We support only one attached original message in a user
reported message.
____
+
The message formatting requirements are described in the next section.
This formatting is optional, but if user reported messages don’t follow
the prescribed format, they’re always identified as phishing.
+
*Let your organization report messages from quarantine* in the *Report
from quarantine* section: Verify that this setting is selected to let
users report messages from quarantine. Otherwise, uncheck this setting.

When you’re finished on the *User reported* page, click *Save*. To
restore all settings on the page to their immediately previous values,
click *Restore*.

===== Message submission format

To correctly identify the original attached messages, messages sent to
the custom mailbox require specific formatting. If the messages don’t
use this format, the original attached messages are always identified as
phishing.

To specify the reason why the original, attached messages were reported,
messages sent to the reporting mailbox must meet the following criteria:

* The user reported message is unmodified and is included as an
attachment.
* The user reported message should contain the following required
headers:
** {blank}
[arabic]
. X-Microsoft-Antispam-Message-Info
** {blank}
[arabic, start=2]
. Message-Id
** {blank}
[arabic, start=3]
. X-Ms-Exchange-Organization-Network-Message-Id
** {blank}
[arabic, start=4]
. X-Ms-Exchange-Crosstenant-Id
+
____
[!NOTE] TenantId in `X-Ms-Exchange-Crosstenant-Id` should be the same as
the tenant.

`X-Microsoft-Antispam-Message-Info` should be a valid xmi.
____
* The Subject line (Envelope Title) of messages sent to the reporting
mailbox must start with one of the following prefix values:
** `1|` or `Junk:`.
** `2|` or `Not junk:`.
** `3|` or `Phishing:`.
+
For example:
** `3|This text in the Subject line is ignored by the system`
** `Not Junk:This text in the Subject line is also ignored by the system`
+
Messages that don’t follow this format will not display properly on the
*Submissions* page at https://security.microsoft.com/reportsubmission.
